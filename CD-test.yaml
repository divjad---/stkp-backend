name: remote ssh command

on: # Kdaj se zaƒçne izvajanje delovnega toka?
  push:
    branches:
      - master # Ob vsaki uveljavitvi na veji produkcijsko-okolje.

jobs:
  build:
    name: Build
    runs-on: # Okolje, v katerem se testi izvedejo.
      - ubuntu-latest
    steps: # Posamezni koraki testiranja.
      - name: execute remote ssh command
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.SSH_HOST }}
          username: ${{ secrets.SSH_USERNAME }}
          key: ${{ secrets.SSH_KEY }}
          script: |
            cd stkp-backend/
            git pull
            npm install
            pm2 restart all
